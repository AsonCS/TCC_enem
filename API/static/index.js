function buscarFuncs(){try{var a=new XMLHttpRequest();a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200){try{var c=JSON.parse(a.responseText);funcsTable(c.response)}catch(d){}}else{alert("Erro status:\n"+a.statusText)}}};a.open("POST","funcionarios.php");a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send("acao=todos")}catch(b){alert("erro ajax")}}function getFunc(a){try{var b=new XMLHttpRequest;b.onreadystatechange=function(){if(b.readyState==4){if(b.status==200){try{var d=JSON.parse(b.responseText);fully(d)}catch(f){alert("Erro:\n"+f)}}else{alert("Erro status:\n"+b.statusText)}}};b.open("POST","funcionarios.php");b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send("acao=func&func="+a)}catch(c){alert("erro ajax")}}function delFunc(b){var a=confirm("Deseja realmente excluir este funcion√°rio.");if(a){try{var c=new XMLHttpRequest;c.onreadystatechange=function(){if(c.readyState==4){if(c.status==200){alert(c.responseText);window.location.reload()}else{alert("Erro status:\n"+c.statusText)}}};c.open("POST","funcionarios.php");c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.send("acao=delete&func="+b)}catch(d){alert("erro ajax")}}}function funcsTable(d){var a=document.getElementById("funcionarios");for(var c in d){var b=document.createElement("tr");b.innerHTML='<td class="dados">'+d[c].dp_nome+"</td>";b.innerHTML+='<td class="dados">'+d[c].dp_cpf+"</td>";b.innerHTML+='<td class="dados">'+d[c].dp_tel+"</td>";b.innerHTML+='<td class="dados">'+d[c].dp_cel+"</td>";b.innerHTML+='<td class="dados">'+d[c].dp_cargo+"</td>";b.innerHTML+='<td class="dados">'+d[c].dp_cidade+"</td>";b.innerHTML+='<img src="edit.png" width="20" height="20" onclick="window.location=\'funcionario.html?param='+d[c].id_func+"'\" />";b.innerHTML+='<img src="minus.png" width="20" height="20" onclick="delFunc(\''+d[c].id_func+"')\" />";b.innerHTML+='<img src="plus.png" width="20" height="20" onclick="window.location=\'funcionario.html\'" />';a.appendChild(b)}}function getQuery(){var a=window.location.href;var c=a.split("?");if(c.length>0){var b=c[1].split("=");if(b.length>0){getFunc(b[1])}}}function fully(b){var a=document.getElementById("cadastro");a.id_func.value=b.id_func;a.dp_nome.value=b.dp_nome;a.dp_natural.value=b.dp_natural;a.dp_natural_uf.value=b.dp_natural_uf;a.dp_nascimento.value=b.dp_nascimento;a.dp_e_civil.value=b.dp_e_civil;a.dp_sexo.value=b.dp_sexo;a.dp_instrucao.value=b.dp_instrucao;a.dp_ctps.value=b.dp_ctps;a.dp_ctps_serie.value=b.dp_ctps_serie;a.dp_ctps_uf.value=b.dp_ctps_uf;a.dp_ctps_exp.value=b.dp_ctps_exp;a.dp_pis.value=b.dp_pis;a.dp_pis_exp.value=b.dp_pis_exp;a.dp_rg.value=b.dp_rg;a.dp_rg_exp.value=b.dp_rg_exp;a.dp_cpf.value=b.dp_cpf;a.dp_cnh.value=b.dp_cnh;a.dp_cnh_cat.value=b.dp_cnh_cat;a.dp_cnh_exp.value=b.dp_cnh_exp;a.dp_tel.value=b.dp_tel;a.dp_cel.value=b.dp_cel;a.dp_ex_medico.value=b.dp_ex_medico;a.dp_cep.value=b.dp_cep;a.dp_logradouro.value=b.dp_logradouro;a.dp_complemento.value=b.dp_complemento;a.dp_bairro.value=b.dp_bairro;a.dp_cidade.value=b.dp_cidade;a.tr_trans.value=b.tr_trans;a.tr_vale.value=b.tr_vale;a.tr_preco.value=b.tr_preco;a.tr_linha.value=b.tr_linha;a.tr_qtd_ida.value=b.tr_qtd_ida;a.tr_qtd_volta.value=b.tr_qtd_volta;a.ut_en.value=b.ut_en;a.ut_sa.value=b.ut_sa;a.ut_alm_ida.value=b.ut_alm_ida;a.ut_alm_volta.value=b.ut_alm_volta;a.sabado.value=b.sabado;a.sa_ent.value=b.sa_ent;a.sa_sai.value=b.sa_sai;a.dp_salario.value=b.dp_salario;a.dp_cargo.value=b.dp_cargo;a.co_banco_dep.value=b.co_banco_dep;a.co_banco.value=b.co_banco;a.co_banco_t.value=b.co_banco_t;a.co_agencia.value=b.co_agencia;a.co_conta.value=b.co_conta;a.observacoes.value=b.observacoes;if(b.tr_trans==0){aparecer("trans")}else{sumir("trans")}if(b.tr_trans==0){aparecer("sabado_p")}else{sumir("sabado_p")}}function aparecer(b){var a=document.getElementById(b).setAttribute("style","visibility: visible;")}function sumir(b){var a=document.getElementById(b).setAttribute("style","visibility: hidden;")}function valid(){var b=document.getElementById("cadastro");if(b.tr_trans.value==1){b.tr_vale.value="";b.tr_linha.value="";b.tr_qtd_ida.value="0";b.tr_qtd_volta.value="0"}if(b.sabado.value==0){b.sa_ent.value="00:00";b.sa_sai.value="00:00"}var a=confirm("Confirma o envio");return a};